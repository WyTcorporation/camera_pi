–í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Å–æ–º
üìå –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É:
–°—Ç–∞—Ä—Ç / –ü–∞—É–∑–∞ (–ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è)
–°—Ç–æ–ø
–°—Ç–∞—Ç—É—Å –∑–∞–ø–∏—Å—É (—ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä)

üõ†Ô∏è 1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Flask:

```
    sudo apt install python3-flask -y
```

üìÇ 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É:
–î–æ–ø–æ–≤–Ω–∏–º–æ —ñ—Å–Ω—É—é—á—É –ø–∞–ø–∫—É:

```
    cd ~/video_recorder
    mkdir templates static
    nano web_control.py
```

üñ•Ô∏è 3. –°–∫—Ä–∏–ø—Ç Flask –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É (web_control.py):

```
from flask import Flask, render_template, redirect, jsonify
import os, signal, subprocess, time

app = Flask(__name__)

proc1 = proc2 = None
recording = False
paused = False

@app.route('/')
def index():
    return render_template('index.html', recording=recording, paused=paused)

@app.route('/start')
def start():
    global recording, proc1, proc2, paused
    if recording:
        return redirect('/')

    date = time.strftime("%Y-%m-%d_%H-%M-%S")
    folder = f"~/Projects/video_recorder/records//recording_{date}"
    os.makedirs(folder, exist_ok=True)

    cmd_cam1 = ["ffmpeg", "-f", "v4l2", "-framerate", "30",
                "-video_size", "1920x1080", "-i", "/dev/video0",
                "-c:v", "libx264", "-preset", "veryfast",
                f"{folder}/cam1_{date}.mp4"]

    cmd_cam2 = ["ffmpeg", "-f", "v4l2", "-framerate", "30",
                "-video_size", "1920x1080", "-i", "/dev/video1",
                "-c:v", "libx264", "-preset", "veryfast",
                f"{folder}/cam2_{date}.mp4"]

    proc1 = subprocess.Popen(cmd_cam1)
    proc2 = subprocess.Popen(cmd_cam2)

    recording = True
    paused = False

    return redirect('/')

@app.route('/pause')
def pause_recording():
    global paused
    if recording and not paused:
        proc1.send_signal(signal.SIGSTOP)
        proc2.send_signal(signal.SIGSTOP)
        paused = True
    return redirect('/')

@app.route('/resume')
def resume_recording():
    global paused
    if recording and paused:
        proc1.send_signal(signal.SIGCONT)
        proc2.send_signal(signal.SIGCONT)
        paused = False
    return redirect('/')

@app.route('/stop')
def stop():
    global recording, paused
    if recording:
        proc1.terminate()
        proc2.terminate()
        recording = False
        paused = False
    return redirect('/')

@app.route('/status')
def status():
    return jsonify({'recording': recording, 'paused': paused})

if __name__ == "__main__":
    app.run(host='0.0.0.0', port=5000, debug=False)
```

üåê 4. HTML-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å (templates/index.html):

```
    nano templates/index.html
```

–î–æ–¥–∞–π –∫–æ–¥:

```
<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Raspberry Pi Video Control</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 50px; }
        button { padding: 15px 30px; margin: 10px; font-size: 20px; cursor: pointer; }
        .start { background: green; color: white; }
        .stop { background: red; color: white; }
        .pause { background: orange; color: black; }
    </style>
</head>
<body>
    <h1>Raspberry Pi Video Control</h1>

    {% if not recording %}
        <a href="/start"><button class="start">–°—Ç–∞—Ä—Ç</button></a>
    {% else %}
        {% if not paused %}
            <a href="/pause"><button class="pause">–ü–∞—É–∑–∞</button></a>
        {% else %}
            <a href="/resume"><button class="pause">–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏</button></a>
        {% endif %}
        <a href="/stop"><button class="stop">–°—Ç–æ–ø</button></a>
    {% endif %}

    <p>
        –°—Ç–∞—Ç—É—Å –∑–∞–ø–∏—Å—É: 
        {% if recording %}
            {% if paused %}
                <strong style="color:orange;">–ù–∞ –ø–∞—É–∑—ñ</strong>
            {% else %}
                <strong style="color:green;">–ô–¥–µ –∑–∞–ø–∏—Å...</strong>
            {% endif %}
        {% else %}
            <strong style="color:red;">–ó–∞–ø–∏—Å –∑—É–ø–∏–Ω–µ–Ω–æ</strong>
        {% endif %}
    </p>

    <script>
        setInterval(() => {
            fetch('/status').then(resp => resp.json()).then(data => {
                location.reload();
            });
        }, 5000);
    </script>
</body>
</html>

```

‚ñ∂Ô∏è 5. –ó–∞–ø—É—Å–∫ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É:

```
    python3 web_control.py
```

üöÄ 6. –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ –û–°:

```
    sudo nano /etc/rc.local
    
    #!/bin/sh -e
    cd /home/pi/video_recorder && python3 web_control.py &
    
    exit 0
```

```sudo chmod +x /etc/rc.local```

```ls -l /etc/rc.local```

–ú–∞—î—à –ø–æ–±–∞—á–∏—Ç–∏:
-rwxr-xr-x 1 root root ... /etc/rc.local
